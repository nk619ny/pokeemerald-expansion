raw `
//.set LOCALID_BIRCHS_LAB_AIDE, 1
//.set LOCALID_BIRCHS_LAB_BIRCH, 2
//.set LOCALID_BIRCHS_LAB_RIVAL, 3
//.set LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL, 4
//.set LOCALID_BIRCHS_LAB_BALL_TOTODILE, 5
//.set LOCALID_BIRCHS_LAB_BALL_CHIKORITA, 6

LittlerootTown_ProfessorBirchsLab_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, LittlerootTown_ProfessorBirchsLab_OnTransition
	map_script MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE, LittlerootTown_ProfessorBirchsLab_OnWarp
	map_script MAP_SCRIPT_ON_FRAME_TABLE, LittlerootTown_ProfessorBirchsLab_OnFrame
	.byte 0

	@ State descriptions for VAR_DEX_UPGRADE_JOHTO_STARTER_STATE
	@ 1: Beat Elite Four, Dex upgrade ready
	@ 2: Received National Dex
	@ 3: Left lab after receiving National Dex
	@ 4: Entered lab after catching all Hoenn mons
	@ 5: Birch told player to choose Johto starter
	@ 6: Chose Johto starter

	@ State descriptions for VAR_BIRCH_LAB_STATE
	@ 1: Never occurs
	@ 2: Chose starter
	@ 3: Received starter in lab
	@ 4: Defeated rival on Route 103
	@ 5: Received pokedex

LittlerootTown_ProfessorBirchsLab_OnTransition:
	call Common_EventScript_SetupRivalGfxId
	call ProfBirch_EventScript_UpdateLocation
	//goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_SetAfterJohtoStarterLayout
	//goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 4, LittlerootTown_ProfessorBirchsLab_EventScript_SetJohtoStarterLayout
	//goto_if_eq VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 3, LittlerootTown_ProfessorBirchsLab_EventScript_CheckReadyForJohtoStarter
	end

/*
LittlerootTown_ProfessorBirchsLab_EventScript_CheckReadyForJohtoStarter::
	specialvar VAR_RESULT, HasAllHoennMons
	goto_if_eq VAR_RESULT, TRUE, LittlerootTown_ProfessorBirchsLab_EventScript_SetReadyForJohtoStarter
	setobjectmovementtype LOCALID_BIRCHS_LAB_RIVAL, MOVEMENT_TYPE_WANDER_UP_AND_DOWN
	setobjectxyperm LOCALID_BIRCHS_LAB_RIVAL, 5, 10
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SetReadyForJohtoStarter::
	setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 4
	goto LittlerootTown_ProfessorBirchsLab_EventScript_SetJohtoStarterLayout

LittlerootTown_ProfessorBirchsLab_EventScript_SetJohtoStarterLayout::
	setmaplayoutindex LAYOUT_LITTLEROOT_TOWN_PROFESSOR_BIRCHS_LAB_WITH_TABLE
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SetAfterJohtoStarterLayout::
	setmaplayoutindex LAYOUT_LITTLEROOT_TOWN_PROFESSOR_BIRCHS_LAB_WITH_TABLE
	setobjectmovementtype LOCALID_BIRCHS_LAB_RIVAL, MOVEMENT_TYPE_WANDER_UP_AND_DOWN
	setobjectxyperm LOCALID_BIRCHS_LAB_RIVAL, 5, 10
	end
*/

LittlerootTown_ProfessorBirchsLab_OnWarp:
	map_script_2 VAR_BIRCH_LAB_STATE, 2, LittlerootTown_ProfessorBirchsLab_EventScript_SetPlayerPosForReceiveStarter
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 1, LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForDexUpgrade
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2, LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForDexUpgrade
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 3, LittlerootTown_ProfessorBirchsLab_EventScript_AddRivalObject
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_AddRivalObject
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 4, LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForJohtoStarters
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 5, LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForJohtoStarters
	.2byte 0

LittlerootTown_ProfessorBirchsLab_EventScript_SetPlayerPosForReceiveStarter::
	turnobject OBJ_EVENT_ID_PLAYER, DIR_NORTH
	end

/*
LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForDexUpgrade::
	turnobject OBJ_EVENT_ID_PLAYER, DIR_NORTH
	addobject LOCALID_BIRCHS_LAB_BIRCH
	addobject LOCALID_BIRCHS_LAB_RIVAL
	turnobject LOCALID_BIRCHS_LAB_RIVAL, DIR_NORTH
	setobjectxy LOCALID_BIRCHS_LAB_RIVAL, 5, 5
	turnobject LOCALID_BIRCHS_LAB_BIRCH, DIR_SOUTH
	setobjectxy LOCALID_BIRCHS_LAB_BIRCH, 6, 4
	turnobject LOCALID_BIRCHS_LAB_AIDE, DIR_EAST
	setobjectxy LOCALID_BIRCHS_LAB_AIDE, 10, 10
	end

LittlerootTown_ProfessorBirchsLab_EventScript_AddRivalObject::
	addobject LOCALID_BIRCHS_LAB_RIVAL
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SetObjectPosForJohtoStarters::
	addobject LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL
	addobject LOCALID_BIRCHS_LAB_BALL_TOTODILE
	addobject LOCALID_BIRCHS_LAB_BALL_CHIKORITA
	addobject LOCALID_BIRCHS_LAB_RIVAL
	turnobject LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL, DIR_SOUTH
	setobjectxy LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL, 8, 4
	turnobject LOCALID_BIRCHS_LAB_BALL_TOTODILE, DIR_SOUTH
	setobjectxy LOCALID_BIRCHS_LAB_BALL_TOTODILE, 9, 4
	turnobject LOCALID_BIRCHS_LAB_BALL_CHIKORITA, DIR_SOUTH
	setobjectxy LOCALID_BIRCHS_LAB_BALL_CHIKORITA, 10, 4
	turnobject LOCALID_BIRCHS_LAB_BIRCH, DIR_SOUTH
	setobjectxy LOCALID_BIRCHS_LAB_BIRCH, 6, 4
	turnobject LOCALID_BIRCHS_LAB_RIVAL, DIR_EAST
	setobjectxy LOCALID_BIRCHS_LAB_RIVAL, 5, 5
	end
*/

LittlerootTown_ProfessorBirchsLab_OnFrame:
	//map_script_2 VAR_BIRCH_LAB_STATE, 2, LittlerootTown_ProfessorBirchsLab_EventScript_GiveStarterEvent
	//map_script_2 VAR_BIRCH_LAB_STATE, 4, LittlerootTown_ProfessorBirchsLab_EventScript_GivePokedexEvent
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 1, LittlerootTown_ProfessorBirchsLab_EventScript_UpgradeToNationalDex
	//map_script_2 VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 4, LittlerootTown_ProfessorBirchsLab_EventScript_ChooseJohtoStarter
	.2byte 0

@ The starter is technically given prior to this on Route 101 by special ChooseStarter
@ This is just where the game tells you its yours and lets you nickname it
LittlerootTown_ProfessorBirchsLab_EventScript_GiveStarterEvent::
	lockall
	bufferleadmonspeciesname STR_VAR_1
	message LittlerootTown_ProfessorBirchsLab_Text_LikeYouToHavePokemon
	waitmessage
	playfanfare MUS_OBTAIN_ITEM
	waitfanfare
	msgbox LittlerootTown_ProfessorBirchsLab_Text_WhyNotGiveNicknameToMon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, LittlerootTown_ProfessorBirchsLab_EventScript_NicknameStarter
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_GoSeeRival
	end

LittlerootTown_ProfessorBirchsLab_EventScript_NicknameStarter::
	setvar VAR_0x8004, 0
	call Common_EventScript_NameReceivedPartyMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_GoSeeRival
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GoSeeRival::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MightBeGoodIdeaToGoSeeRival, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, LittlerootTown_ProfessorBirchsLab_EventScript_AgreeToSeeRival
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_DeclineSeeingRival
	end

LittlerootTown_ProfessorBirchsLab_EventScript_AgreeToSeeRival::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GetRivalToTeachYou, MSGBOX_DEFAULT
	clearflag FLAG_HIDE_ROUTE_101_BOY
	setvar VAR_BIRCH_LAB_STATE, 3
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_DeclineSeeingRival::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_DontBeThatWay, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, YES, LittlerootTown_ProfessorBirchsLab_EventScript_AgreeToSeeRival
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_DeclineSeeingRival
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GivePokedexEvent::
	lockall
	applymovement OBJ_EVENT_ID_PLAYER, LittlerootTown_ProfessorBirchsLab_Movement_PlayerEnterLabForPokedex
	waitmovement 0
	goto LittlerootTown_ProfessorBirchsLab_EventScript_GivePokedex
	end

LittlerootTown_ProfessorBirchsLab_Movement_PlayerEnterLabForPokedex:
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

/*
LittlerootTown_ProfessorBirchsLab_EventScript_UpgradeToNationalDex::
	lockall
	delay 30
	msgbox LittlerootTown_ProfessorBirchsLab_Text_OtherRegionsUpgradeToNational, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_BIRCHS_LAB_BIRCH, LittlerootTown_ProfessorBirchsLab_Movement_BirchRetrievePokedexes
	waitmovement 0
	delay 20
	playse SE_CLICK
	delay 10
	playse SE_CLICK
	delay 10
	playse SE_CLICK
	delay 10
	playse SE_CLICK
	delay 20
	applymovement LOCALID_BIRCHS_LAB_RIVAL, Common_Movement_WalkInPlaceFasterRight
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterLeft
	waitmovement 0
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayUpgradeComment
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanUpgradeComment
	playse SE_PC_ON
	waitse
	delay 20
	applymovement LOCALID_BIRCHS_LAB_BIRCH, LittlerootTown_ProfessorBirchsLab_Movement_BirchReturnPokedex
	waitmovement 0
	applymovement LOCALID_BIRCHS_LAB_RIVAL, Common_Movement_WalkInPlaceFasterUp
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox LittlerootTown_ProfessorBirchsLab_Text_OkayAllDone, MSGBOX_DEFAULT
	playfanfare MUS_OBTAIN_ITEM
	message LittlerootTown_ProfessorBirchsLab_Text_PokedexUpgradedToNational
	waitmessage
	waitfanfare
	setflag FLAG_SYS_NATIONAL_DEX
	special EnableNationalPokedex
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting2, MSGBOX_DEFAULT
	closemessage
	setflag FLAG_HIDE_LITTLEROOT_TOWN_BIRCH
	setflag FLAG_HIDE_LITTLEROOT_TOWN_RIVAL
	//setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2
	setvar VAR_SCOTT_BF_CALL_STEP_COUNTER, 0
	setflag FLAG_SCOTT_CALL_BATTLE_FRONTIER
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayUpgradeComment::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayUpgradeSoCool, MSGBOX_DEFAULT
	closemessage
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanUpgradeComment::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanYouCanThankMe, MSGBOX_DEFAULT
	closemessage
	return

	*/


LittlerootTown_ProfessorBirchsLab_Movement_BirchRetrievePokedexes:
	walk_left
	walk_in_place_faster_down
	delay_16
	delay_16
	walk_right
	walk_in_place_faster_down
	delay_16
	delay_16
	walk_right
	walk_down
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_in_place_faster_up
	step_end

LittlerootTown_ProfessorBirchsLab_Movement_BirchReturnPokedex:
	walk_left
	walk_left
	walk_left
	walk_up
	walk_up
	walk_up
	walk_up
	walk_left
	walk_in_place_faster_down
	step_end

/*
LittlerootTown_ProfessorBirchsLab_EventScript_ChooseJohtoStarter::
	lockall
	applymovement OBJ_EVENT_ID_PLAYER, LittlerootTown_ProfessorBirchsLab_Movement_PlayerEnterLabForJohtoStarter
	waitmovement 0
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CompletedDexChoosePokemon, MSGBOX_DEFAULT
	setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 5
	releaseall
	end
*/

LittlerootTown_ProfessorBirchsLab_Movement_PlayerEnterLabForJohtoStarter:
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

//LittlerootTown_ProfessorBirchsLab_EventScript_Aide::
//	lock
//	faceplayer
//	goto_if_ge VAR_BIRCH_LAB_STATE, 3, LittlerootTown_ProfessorBirchsLab_EventScript_AideReceivedStarter
//	goto_if_set FLAG_BIRCH_AIDE_MET, LittlerootTown_ProfessorBirchsLab_EventScript_AideAlreadyMet
//	msgbox LittlerootTown_ProfessorBirchsLab_Text_BirchAwayOnFieldwork, MSGBOX_DEFAULT
//	setflag FLAG_BIRCH_AIDE_MET
//	release
//	end

LittlerootTown_ProfessorBirchsLab_EventScript_AideAlreadyMet::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BirchIsntOneForDeskWork, MSGBOX_DEFAULT
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_AideReceivedStarter::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BirchEnjoysRivalsHelpToo, MSGBOX_DEFAULT
	release
	end

/*
LittlerootTown_ProfessorBirchsLab_EventScript_Cyndaquil::
	release
	goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_AlreadyChoseJohtoStarter
	applymovement LOCALID_BIRCHS_LAB_BIRCH, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	showmonpic SPECIES_CYNDAQUIL, 10, 3
	msgbox LittlerootTown_ProfessorBirchsLab_Text_YoullTakeCyndaquil, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_TakeYourTime
	goto LittlerootTown_ProfessorBirchsLab_EventScript_GiveCyndaquil
	end

LittlerootTown_ProfessorBirchsLab_EventScript_Totodile::
	release
	goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_AlreadyChoseJohtoStarter
	applymovement LOCALID_BIRCHS_LAB_BIRCH, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	showmonpic SPECIES_TOTODILE, 10, 3
	msgbox LittlerootTown_ProfessorBirchsLab_Text_YoullTakeTotodile, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_TakeYourTime
	goto LittlerootTown_ProfessorBirchsLab_EventScript_GiveTotodile
	end

LittlerootTown_ProfessorBirchsLab_EventScript_Chikorita::
	release
	goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_AlreadyChoseJohtoStarter
	applymovement LOCALID_BIRCHS_LAB_BIRCH, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	showmonpic SPECIES_CHIKORITA, 10, 3
	msgbox LittlerootTown_ProfessorBirchsLab_Text_YoullTakeChikorita, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_TakeYourTime
	goto LittlerootTown_ProfessorBirchsLab_EventScript_GiveChikorita
	end

LittlerootTown_ProfessorBirchsLab_EventScript_AlreadyChoseJohtoStarter::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BetterLeaveOthersAlone, MSGBOX_DEFAULT
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_TakeYourTime::
	hidemonpic
	msgbox LittlerootTown_ProfessorBirchsLab_Text_TakeYourTimeAllInvaluable, MSGBOX_DEFAULT
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GiveCyndaquil::
	bufferspeciesname STR_VAR_1, SPECIES_CYNDAQUIL
	setvar VAR_TEMP_TRANSFERRED_SPECIES, SPECIES_CYNDAQUIL
	givemon SPECIES_CYNDAQUIL, 5
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PARTY, LittlerootTown_ProfessorBirchsLab_EventScript_SendCyndaquilToParty
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PC, LittlerootTown_ProfessorBirchsLab_EventScript_SendCyndaquilToPC
	hidemonpic
	goto Common_EventScript_NoMoreRoomForPokemon
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendCyndaquilToParty::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedCyndaquil
	call Common_EventScript_GetGiftMonPartySlot
	call Common_EventScript_NameReceivedPartyMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedCyndaquil
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendCyndaquilToPC::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_CYNDAQUIL
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_CyndaquilTransferredToPC
	call Common_EventScript_NameReceivedBoxMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_CyndaquilTransferredToPC
	end

LittlerootTown_ProfessorBirchsLab_EventScript_CyndaquilTransferredToPC::
	call Common_EventScript_TransferredToPC
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedCyndaquil
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedCyndaquil::
	hidemonpic
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting, MSGBOX_DEFAULT
	setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GiveTotodile::
	bufferspeciesname STR_VAR_1, SPECIES_TOTODILE
	setvar VAR_TEMP_TRANSFERRED_SPECIES, SPECIES_TOTODILE
	givemon SPECIES_TOTODILE, 5
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PARTY, LittlerootTown_ProfessorBirchsLab_EventScript_SendTotodileToParty
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PC, LittlerootTown_ProfessorBirchsLab_EventScript_SendTotodileToPC
	hidemonpic
	goto Common_EventScript_NoMoreRoomForPokemon
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendTotodileToParty::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_TOTODILE
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedTotodile
	call Common_EventScript_GetGiftMonPartySlot
	call Common_EventScript_NameReceivedPartyMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedTotodile
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendTotodileToPC::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_TOTODILE
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_TotodileTransferredToPC
	call Common_EventScript_NameReceivedBoxMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_TotodileTransferredToPC
	end

LittlerootTown_ProfessorBirchsLab_EventScript_TotodileTransferredToPC::
	call Common_EventScript_TransferredToPC
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedTotodile
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedTotodile::
	hidemonpic
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting, MSGBOX_DEFAULT
	setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GiveChikorita::
	bufferspeciesname STR_VAR_1, SPECIES_CHIKORITA
	setvar VAR_TEMP_TRANSFERRED_SPECIES, SPECIES_CHIKORITA
	givemon SPECIES_CHIKORITA, 5
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PARTY, LittlerootTown_ProfessorBirchsLab_EventScript_SendChikoritaToParty
	goto_if_eq VAR_RESULT, MON_GIVEN_TO_PC, LittlerootTown_ProfessorBirchsLab_EventScript_SendChikoritaToPC
	hidemonpic
	goto Common_EventScript_NoMoreRoomForPokemon
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendChikoritaToParty::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_CHIKORITA
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedChikorita
	call Common_EventScript_GetGiftMonPartySlot
	call Common_EventScript_NameReceivedPartyMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedChikorita
	end

LittlerootTown_ProfessorBirchsLab_EventScript_SendChikoritaToPC::
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter
	removeobject LOCALID_BIRCHS_LAB_BALL_CHIKORITA
	msgbox gText_NicknameThisPokemon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, LittlerootTown_ProfessorBirchsLab_EventScript_ChikoritaTransferredToPC
	call Common_EventScript_NameReceivedBoxMon
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ChikoritaTransferredToPC
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ChikoritaTransferredToPC::
	call Common_EventScript_TransferredToPC
	goto LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedChikorita
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedChikorita::
	hidemonpic
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting, MSGBOX_DEFAULT
	setvar VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ReceivedJohtoStarter::
	playfanfare MUS_OBTAIN_ITEM
	message LittlerootTown_ProfessorBirchsLab_Text_ReceivedJohtoStarter
	waitmessage
	waitfanfare
	return
*/

LittlerootTown_ProfessorBirchsLab_EventScript_Birch::
	lock
	faceplayer
	goto_if_unset FLAG_DEFEATED_NORMAN_INTRO, LittlerootTown_ProfessorBirchsLab_EventScript_ChooseStarterGen
	//goto_if_eq VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 5, LittlerootTown_ProfessorBirchsLab_EventScript_CanHaveAnyOneOfRarePokemon
	//goto_if_eq VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2, LittlerootTown_ProfessorBirchsLab_EventScript_GrassyPatchWaiting
	goto_if_unset FLAG_HAS_MATCH_CALL, LittlerootTown_ProfessorBirchsLab_EventScript_TryRatePokedexOrRegister
	goto_if_unset FLAG_ENABLE_PROF_BIRCH_MATCH_CALL, EventScript_RegisterProfBirch
	goto LittlerootTown_ProfessorBirchsLab_EventScript_TryRatePokedexOrRegister
	end

LittlerootTown_ProfessorBirchsLab_EventScript_CanHaveAnyOneOfRarePokemon::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CanHaveAnyOneOfRarePokemon, MSGBOX_DEFAULT
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GrassyPatchWaiting::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting2, MSGBOX_DEFAULT
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_TryRatePokedexOrRegister::
	goto_if_unset FLAG_HIDE_LITTLEROOT_TOWN_BIRCHS_LAB_UNKNOWN_0x380, ProfBirch_EventScript_RatePokedexOrRegister
	//goto_if_eq VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 3, ProfBirch_EventScript_RatePokedexOrRegister
	//goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, ProfBirch_EventScript_RatePokedexOrRegister
	goto_if_eq VAR_BIRCH_LAB_STATE, 5, LittlerootTown_ProfessorBirchsLab_EventScript_PokemonAwait
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BirchRivalGoneHome, MSGBOX_DEFAULT
	release
	end

EventScript_RegisterProfBirch::
	msgbox MatchCall_Text_BirchRegisterCall, MSGBOX_DEFAULT
	closemessage
	delay 30
	playfanfare MUS_REGISTER_MATCH_CALL
	msgbox MatchCall_Text_RegisteredBirch, MSGBOX_DEFAULT
	waitfanfare
	closemessage
	delay 30
	setflag FLAG_ENABLE_PROF_BIRCH_MATCH_CALL
	setvar VAR_REGISTER_BIRCH_STATE, 2
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_GivePokedex::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_HeardYouBeatRivalTakePokedex, MSGBOX_DEFAULT
	call LittlerootTown_ProfessorBirchsLab_EventScript_ReceivePokedex
	msgbox LittlerootTown_ProfessorBirchsLab_Text_ExplainPokedex, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_BIRCHS_LAB_RIVAL, LittlerootTown_ProfessorBirchsLab_Movement_RivalApproachPlayer
	waitmovement 0
	applymovement OBJ_EVENT_ID_PLAYER, Common_Movement_WalkInPlaceFasterRight
	waitmovement 0
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayGivePokeBalls
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanGivePokeBalls
	setvar VAR_BIRCH_LAB_STATE, 5
	setflag FLAG_ADVENTURE_STARTED
	setvar VAR_OLDALE_TOWN_STATE, 1
	setvar VAR_LITTLEROOT_RIVAL_STATE, 4
	setvar VAR_LITTLEROOT_TOWN_STATE, 3
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayGivePokeBalls::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayGotPokedexTooTakeThese, MSGBOX_DEFAULT
	giveitem ITEM_POKE_BALL, 5
	call_if_eq VAR_RESULT, FALSE, LittlerootTown_ProfessorBirchsLab_EventScript_MayNoRoomForPokeBalls
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CatchCutePokemonWithPokeBalls, MSGBOX_DEFAULT
	setvar VAR_RESULT, 0
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanGivePokeBalls::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanGotPokedexTooTakeThese, MSGBOX_DEFAULT
	giveitem ITEM_POKE_BALL, 5
	call_if_eq VAR_RESULT, FALSE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanNoRoomForPokeBalls
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CatchCoolPokemonWithPokeBalls, MSGBOX_DEFAULT
	setvar VAR_RESULT, 1
	return

LittlerootTown_ProfessorBirchsLab_EventScript_ReceivePokedex::
	playfanfare MUS_OBTAIN_ITEM
	message LittlerootTown_ProfessorBirchsLab_Text_ReceivedPokedex
	waitfanfare
	setflag FLAG_SYS_POKEDEX_GET
	special SetUnlockedPokedexFlags
	setflag FLAG_RECEIVED_POKEDEX_FROM_BIRCH
	//setvar VAR_CABLE_CLUB_TUTORIAL_STATE, 1
	return

LittlerootTown_ProfessorBirchsLab_EventScript_PokemonAwait::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CountlessPokemonAwait, MSGBOX_DEFAULT
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayNoRoomForPokeBalls::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_OhYourBagsFull, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanNoRoomForPokeBalls::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_HeyYourBagsFull, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_Movement_RivalApproachPlayer:
	walk_down
	walk_in_place_faster_left
	step_end

LittlerootTown_ProfessorBirchsLab_EventScript_Machine::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_SeriousLookingMachine, MSGBOX_SIGN
	end

LittlerootTown_ProfessorBirchsLab_EventScript_Rival::
	lock
	faceplayer
	//goto_if_eq VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 5, LittlerootTown_ProfessorBirchsLab_EventScript_RivalFuturePlans
	//goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 6, LittlerootTown_ProfessorBirchsLab_EventScript_RivalHaveYouGoneToBattleFrontier
	//goto_if_ge VAR_DEX_UPGRADE_JOHTO_STARTER_STATE, 2, LittlerootTown_ProfessorBirchsLab_EventScript_RivalTakeBreakFromFieldwork
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayWhereShouldIGoNext
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanWhereShouldIGoNext
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayWhereShouldIGoNext::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayWhereShouldIGoNext, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanWhereShouldIGoNext::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanWhereShouldIGoNext, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_RivalFuturePlans::
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayWhatNextImStayingHere
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanPreferCollectingSlowly
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayWhatNextImStayingHere::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayWhatNextImStayingHere, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanPreferCollectingSlowly:
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanPreferCollectingSlowly, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_RivalHaveYouGoneToBattleFrontier::
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayHaveYouGoneToBattleFrontier
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanHaveYouGoneToBattleFrontier
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayHaveYouGoneToBattleFrontier::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayHaveYouGoneToBattleFrontier, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanHaveYouGoneToBattleFrontier::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanHaveYouGoneToBattleFrontier, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_RivalTakeBreakFromFieldwork::
	checkplayergender
	call_if_eq VAR_RESULT, MALE, LittlerootTown_ProfessorBirchsLab_EventScript_MayTakeBreakFromFieldwork
	call_if_eq VAR_RESULT, FEMALE, LittlerootTown_ProfessorBirchsLab_EventScript_BrendanTakeBreakFromFieldwork
	release
	end

LittlerootTown_ProfessorBirchsLab_EventScript_MayTakeBreakFromFieldwork::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_MayTakeBreakFromFieldwork, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_BrendanTakeBreakFromFieldwork::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BrendanTakeBreakFromFieldwork, MSGBOX_DEFAULT
	return

LittlerootTown_ProfessorBirchsLab_EventScript_PC::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_PCUsedForResearch, MSGBOX_SIGN
	end

LittlerootTown_ProfessorBirchsLab_EventScript_Bookshelf::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_CrammedWithBooksOnPokemon, MSGBOX_SIGN
	end

LittlerootTown_ProfessorBirchsLab_EventScript_Book::
	msgbox LittlerootTown_ProfessorBirchsLab_Text_BookTooHardToRead, MSGBOX_SIGN
	end

LittlerootTown_ProfessorBirchsLab_EventScript_ScottAboardSSTidalCall::
	lockall
	pokenavcall LittlerootTown_ProfessorBirchsLab_Text_ScottAboardSSTidalCall
	waitmessage
	clearflag FLAG_SCOTT_CALL_BATTLE_FRONTIER
	releaseall
	end

LittlerootTown_ProfessorBirchsLab_EventScript_RemoveRivalIntroFlag::
	checkplayergender
	call_if_eq VAR_RESULT, MALE, ProfessorBirchsLab_EventScript_HideMayInBedroom
	call_if_eq VAR_RESULT, FEMALE, ProfessorBirchsLab_EventScript_HideBrendanInBedroom
    return

ProfessorBirchsLab_EventScript_HideMayInBedroom::
	setflag FLAG_HIDE_LITTLEROOT_TOWN_MAYS_HOUSE_RIVAL_BEDROOM
	return

ProfessorBirchsLab_EventScript_HideBrendanInBedroom::
	setflag FLAG_HIDE_LITTLEROOT_TOWN_BRENDANS_HOUSE_RIVAL_BEDROOM
	return

LittlerootTown_ProfessorBirchsLab_Text_BirchAwayOnFieldwork:
	.string "Hunh? PROF. BIRCH?\p"
	.string "The PROF's away on fieldwork.\n"
	.string "Ergo, he isn't here.\p"
	.string "Oh, let me explain what fieldwork is.\p"
	.string "It is to study things in the natural\n"
	.string "environment, like fields and mountains,\l"
	.string "instead of a laboratory.\p"
	.string "The PROF isn't one for doing desk work.\n"
	.string "He's the type of person who would\l"
	.string "rather go outside and experience\l"
	.string "things than read about them here.$"

LittlerootTown_ProfessorBirchsLab_Text_BirchIsntOneForDeskWork:
	.string "The PROF isn't one for doing desk work.\n"
	.string "He's the type of person who would\l"
	.string "rather go outside and experience\l"
	.string "things than read about them here.$"

LittlerootTown_ProfessorBirchsLab_Text_BirchEnjoysRivalsHelpToo:
	.string "PROF. BIRCH is studying the habitats\n"
	.string "and distribution of POKéMON.\p"
	.string "The PROF enjoys {RIVAL}'s help, too.\n"
	.string "There's a lot of love there.$"

LittlerootTown_ProfessorBirchsLab_Text_LikeYouToHavePokemon:
	.string "PROF. BIRCH: So, {PLAYER}{KUN}.\p"
	.string "I've heard so much about you from\n"
	.string "your father.\p"
	.string "I've heard that you don't have your\n"
	.string "own POKéMON yet.\p"
	.string "But the way you battled earlier,\n"
	.string "you pulled it off with aplomb!\p"
	.string "I guess you have your father's blood\n"
	.string "in your veins after all!\p"
	.string "Oh, yes. As thanks for rescuing me,\n"
	.string "I'd like you to have the POKéMON you\l"
	.string "used earlier.\p"
	.string "{PLAYER} received the {STR_VAR_1}!$"

LittlerootTown_ProfessorBirchsLab_Text_WhyNotGiveNicknameToMon:
	.string "PROF. BIRCH: While you're at it, why not\n"
	.string "give a nickname to that {STR_VAR_1}?$"

LittlerootTown_ProfessorBirchsLab_Text_MightBeGoodIdeaToGoSeeRival:
	.string "PROF. BIRCH: If you work at POKéMON\n"
	.string "and gain experience, I think you'll make\l"
	.string "an extremely good TRAINER.\p"
	.string "My kid, {RIVAL}, is also studying\n"
	.string "POKéMON while helping me out.\p"
	.string "{PLAYER}{KUN}, don't you think it might be\n"
	.string "a good idea to go see {RIVAL}?$"

LittlerootTown_ProfessorBirchsLab_Text_GetRivalToTeachYou:
	.string "PROF. BIRCH: Great!\n"
	.string "{RIVAL} should be happy, too.\p"
	.string "Get {RIVAL} to teach you what it\n"
	.string "means to be a TRAINER.$"

LittlerootTown_ProfessorBirchsLab_Text_DontBeThatWay:
	.string "PROF. BIRCH: Oh, don't be that way.\n"
	.string "You should go meet my kid.$"

LittlerootTown_ProfessorBirchsLab_Text_BirchRivalGoneHome:
	.string "PROF. BIRCH: {RIVAL}?\n"
	.string "Gone home, I think.\p"
	.string "Or maybe that kid's scrabbling around\n"
	.string "in tall grass again somewhere…\p"
	.string "If you or your POKéMON get tired,\n"
	.string "you should get some rest at home.$"

LittlerootTown_ProfessorBirchsLab_Text_HeardYouBeatRivalTakePokedex:
	.string "PROF. BIRCH: Oh, hi, {PLAYER}{KUN}!\p"
	.string "I heard you beat {RIVAL} on\n"
	.string "your first try. That's excellent!\p"
	.string "{RIVAL}'s been helping with my research\n"
	.string "for a long time.\p"
	.string "{RIVAL} has an extensive history as\n"
	.string "a TRAINER already.\p"
	.string "Here, {PLAYER}{KUN}, I ordered this for my\n"
	.string "research, but I think you should have\l"
	.string "this POKéDEX.$"

LittlerootTown_ProfessorBirchsLab_Text_ReceivedPokedex:
	.string "{PLAYER} received the POKéDEX!$"

LittlerootTown_ProfessorBirchsLab_Text_ExplainPokedex:
	.string "PROF. BIRCH: The POKéDEX is a high-tech\n"
	.string "tool that automatically makes a record\l"
	.string "of any POKéMON you meet or catch.\p"
	.string "My kid, {RIVAL}, goes everywhere\n"
	.string "with it.\p"
	.string "Whenever my kid catches a rare POKéMON\n"
	.string "and records its data in the POKéDEX,\l"
	.string "why, {RIVAL} looks for me while I'm out\l"
	.string "doing fieldwork, and shows me.$"

LittlerootTown_ProfessorBirchsLab_Text_CountlessPokemonAwait:
	.string "PROF. BIRCH: Countless POKéMON\n"
	.string "await you!\p"
	.string "Argh, I'm getting the itch to get out\n"
	.string "and do fieldwork again!$"

LittlerootTown_ProfessorBirchsLab_Text_MayGotPokedexTooTakeThese:
	.string "MAY: Oh, wow, {PLAYER}{KUN}!\n"
	.string "You got a POKéDEX, too!\p"
	.string "That's great! Just like me!\n"
	.string "I've got something for you, too!$"

LittlerootTown_ProfessorBirchsLab_Text_CatchCutePokemonWithPokeBalls:
	.string "MAY: It's fun if you can get a lot of\n"
	.string "POKéMON!\p"
	.string "I'm going to look all over the place\n"
	.string "because I want different POKéMON.\p"
	.string "If I find any cute POKéMON, I'll catch\n"
	.string "them with POKé BALLS!$"

LittlerootTown_ProfessorBirchsLab_Text_OhYourBagsFull:
	.string "Oh? Your BAG's full.$"

LittlerootTown_ProfessorBirchsLab_Text_MayWhereShouldIGoNext:
	.string "MAY: I wonder where I should go look\n"
	.string "for POKéMON next?$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanGotPokedexTooTakeThese:
	.string "BRENDAN: Huh…\n"
	.string "So you got a POKéDEX, too.\p"
	.string "Well then, here.\n"
	.string "I'll give you these.$"

LittlerootTown_ProfessorBirchsLab_Text_CatchCoolPokemonWithPokeBalls:
	.string "BRENDAN: You know it's more fun to\n"
	.string "have a whole bunch of POKéMON.\p"
	.string "I'm going to explore all over the place\n"
	.string "to find different POKéMON.\p"
	.string "If I find any cool POKéMON, you bet\n"
	.string "I'll try to get them with POKé BALLS.$"

LittlerootTown_ProfessorBirchsLab_Text_HeyYourBagsFull:
	.string "Hey, your BAG's full.$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanWhereShouldIGoNext:
	.string "BRENDAN: Where should I look for\n"
	.string "POKéMON next…$"

LittlerootTown_ProfessorBirchsLab_Text_SeriousLookingMachine:
	.string "It's a serious-looking machine.\n"
	.string "The PROF must use this for research.$"

LittlerootTown_ProfessorBirchsLab_Text_PCUsedForResearch:
	.string "It's a PC used for research.\n"
	.string "Better not mess around with it.$"

LittlerootTown_ProfessorBirchsLab_Text_CrammedWithBooksOnPokemon:
	.string "It's crammed with books on POKéMON.$"

LittlerootTown_ProfessorBirchsLab_Text_BookTooHardToRead:
	.string "It's a book that's too hard to read.$"

LittlerootTown_ProfessorBirchsLab_Text_OtherRegionsUpgradeToNational:
	.string "PROF. BIRCH: Now…\p"
	.string "{PLAYER}{KUN} and {RIVAL}, I've had the two\n"
	.string "of you help me study POKéMON.\p"
	.string "Thanks to your help, new facts\n"
	.string "are coming to light.\p"
	.string "It appears that in the HOENN region,\n"
	.string "there are also POKéMON from other\l"
	.string "regions.\p"
	.string "It goes to show how rich and varied\n"
	.string "the natural environments of HOENN\l"
	.string "happen to be.\p"
	.string "That's why I think it's necessary for\n"
	.string "me to upgrade your POKéDEX to\l"
	.string "the NATIONAL Mode.\p"
	.string "Here, let me see your POKéDEX units.$"

LittlerootTown_ProfessorBirchsLab_Text_MayUpgradeSoCool:
	.string "MAY: Eheheh!\p"
	.string "It's so cool that even my POKéDEX\n"
	.string "is getting updated!\p"
	.string "It's because you went out and caught\n"
	.string "so many POKéMON, {PLAYER}{KUN}!$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanYouCanThankMe:
	.string "BRENDAN: I went out all over HOENN\n"
	.string "and checked out POKéMON.\p"
	.string "You can thank me for getting\n"
	.string "the NATIONAL Mode POKéDEX.\p"
	.string "Yep, you're lucky, {PLAYER}!$"

LittlerootTown_ProfessorBirchsLab_Text_OkayAllDone:
	.string "PROF. BIRCH: Okay, all done!$"

LittlerootTown_ProfessorBirchsLab_Text_PokedexUpgradedToNational:
	.string "{PLAYER}'s POKéDEX was upgraded\n"
	.string "to the NATIONAL Mode!$"

LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting2:
	.string "PROF. BIRCH: But listen.\n"
	.string "You've become the CHAMPION,\l"
	.string "but your POKéMON journey isn't over.\p"
	.string "There is no end to the road\n"
	.string "that is POKéMON.\p"
	.string "Somewhere, there is a grassy patch\n"
	.string "that's waiting for you!$"

LittlerootTown_ProfessorBirchsLab_Text_MayTakeBreakFromFieldwork:
	.string "MAY: I think I'll take a short break\n"
	.string "from fieldwork.\p"
	.string "I think I'll help the PROF here for\n"
	.string "a while.$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanTakeBreakFromFieldwork:
	.string "BRENDAN: For the time being,\n"
	.string "I'm taking a break from fieldwork.\p"
	.string "I'll be helping out the PROF here\n"
	.string "for a while.$"

LittlerootTown_ProfessorBirchsLab_Text_CompletedDexChoosePokemon:
	.string "PROF. BIRCH: Oh, {PLAYER}{KUN}!\n"
	.string "Let's have a look at your POKéDEX.\p"
	.string "… … … … … …\n"
	.string "… … … … … …\p"
	.string "Yes, there's no doubt about it.\p"
	.string "You really have completed the HOENN\n"
	.string "region's POKéDEX.\p"
	.string "That's more than just impressive.\p"
	.string "I have a gift for you.\p"
	.string "Consider it my show of appreciation\n"
	.string "for the fantastic work you've done.\p"
	.string "My gift is a rare POKéMON only found\n"
	.string "in another region!\p"
	.string "You can have any one of these\n"
	.string "three POKéMON!$"

LittlerootTown_ProfessorBirchsLab_Text_CanHaveAnyOneOfRarePokemon:
	.string "PROF. BIRCH: These are rare POKéMON\n"
	.string "only found in another region!\p"
	.string "You can have any one of these\n"
	.string "three POKéMON!$"

LittlerootTown_ProfessorBirchsLab_Text_YoullTakeCyndaquil:
	.string "PROF. BIRCH: The FIRE POKéMON\n"
	.string "CYNDAQUIL caught your eye!\p"
	.string "You're as sharp as ever!\p"
	.string "So the CYNDAQUIL is your choice?$"

LittlerootTown_ProfessorBirchsLab_Text_YoullTakeTotodile:
	.string "PROF. BIRCH: The WATER POKéMON\n"
	.string "TOTODILE is your choice!\p"
	.string "You know how to pick a good one.\p"
	.string "So, you'll take the TOTODILE?$"

LittlerootTown_ProfessorBirchsLab_Text_YoullTakeChikorita:
	.string "PROF. BIRCH: The GRASS POKéMON\n"
	.string "CHIKORITA is your choice!\p"
	.string "You sure know what you're doing.\p"
	.string "So, you'll take the CHIKORITA?$"

LittlerootTown_ProfessorBirchsLab_Text_TakeYourTimeAllInvaluable:
	.string "PROF. BIRCH: Take your time before\n"
	.string "you decide.\p"
	.string "They're all invaluable POKéMON.$"

@ Unused
LittlerootTown_ProfessorBirchsLab_Text_PickedFinePokemon:
	.string "PROF. BIRCH: I see!\n"
	.string "You picked a fine POKéMON!$"

LittlerootTown_ProfessorBirchsLab_Text_ReceivedJohtoStarter:
	.string "{PLAYER} received the {STR_VAR_1}\n"
	.string "from PROF. BIRCH!$"

@ Unused
LittlerootTown_ProfessorBirchsLab_Text_NicknameJohtoStarter:
	.string "Want to give a nickname to\n"
	.string "the {STR_VAR_1} you received?$"

LittlerootTown_ProfessorBirchsLab_Text_GrassyPatchWaiting:
	.string "PROF. BIRCH: Listen, {PLAYER}{KUN}.\n"
	.string "You've completed the HOENN POKéDEX,\l"
	.string "but your POKéMON journey isn't over.\p"
	.string "There is no end to the road\n"
	.string "that is POKéMON.\p"
	.string "Somewhere, there is a grassy patch\n"
	.string "that's waiting for you!$"

LittlerootTown_ProfessorBirchsLab_Text_BetterLeaveOthersAlone:
	.string "You received the promised POKéMON.\n"
	.string "Better leave the others alone.$"

@ Unused
LittlerootTown_ProfessorBirchsLab_Text_DontHaveAnyRoomForPokemon:
	.string "Oh, you don't have any room for\n"
	.string "this POKéMON.$"

LittlerootTown_ProfessorBirchsLab_Text_MayWhatNextImStayingHere:
	.string "MAY: {PLAYER}{KUN}, after this…\n"
	.string "What are you going to do?\p"
	.string "Are you going to keep battling\n"
	.string "and sharpening your skills?\p"
	.string "Or are you going to try filling\n"
	.string "the NATIONAL POKéDEX?\p"
	.string "I'm staying here to help the PROF.$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanPreferCollectingSlowly:
	.string "BRENDAN: Rather than collecting\n"
	.string "POKéMON, I prefer slowly and \l"
	.string "steadily raising the one I chose.$"

LittlerootTown_ProfessorBirchsLab_Text_MayHaveYouGoneToBattleFrontier:
	.string "MAY: Oh, hi, {PLAYER}{KUN}!\n"
	.string "Have you gone to that place,\l"
	.string "the BATTLE FRONTIER?$"

LittlerootTown_ProfessorBirchsLab_Text_BrendanHaveYouGoneToBattleFrontier:
	.string "BRENDAN: Hey, {PLAYER}!\n"
	.string "Have you gone out to that place,\l"
	.string "the BATTLE FRONTIER?$"

LittlerootTown_ProfessorBirchsLab_Text_ScottAboardSSTidalCall:
	.string "… … … … … …\n"
	.string "… … … … … Beep!\p"
	.string "SCOTT: Hi, hi, {PLAYER}!\n"
	.string "It's me, SCOTT.\p"
	.string "I'm aboard the S.S. TIDAL now.\n"
	.string "It feels great to be on the sea!\p"
	.string "By the way…\p"
	.string "There's this place that I'd like to\n"
	.string "invite you to for a visit.\p"
	.string "If you're interested, board a ferry\n"
	.string "at either SLATEPORT or LILYCOVE.\p"
	.string "I'll fill you in on the details when\n"
	.string "we meet. I'll be waiting!\p"
	.string "… … … … … …\n"
	.string "… … … … … Click!$"

`
// Sets constants to use for Object IDs 
const TempVar_StarterRegion = VAR_TEMP_8
const TempVar_HandicapAnswer = VAR_TEMP_9
const TempVar_ProspectiveHandicap = VAR_TEMP_4

//Uses VAR_TEMP_8 to signify starter region selected
//Uses VAR_TEMP_7 to record answer to starter offer
//Uses VAR_TEMP_9 to store handicap answer
//Uses VAR_TEMP_4 to store resultant prospective handicap

script LittlerootTown_ProfessorBirchsLab_EventScript_ChooseStarterGen{
    lock
    faceplayer
    if(!flag(FLAG_REMOVE_LAB_STARTERS)){
        if(var(TempVar_StarterRegion) == 0) {
            msgbox("Prof. Birch: Ah, hello {PLAYER}!\lI heard you were going to begin your\njourney as a Pokemon Trainer today.")
        }
        message(format("What region would you like to choose your starter Pokemon from?"))
        dynmultichoice(25,3,1,4,2,DYN_MULTICHOICE_CB_NONE,"Kanto","Johto","Hoenn","Sinnoh","Unova","Kalos","Alola","Galar","Paldea","Hisui")
        copyvar(TempVar_StarterRegion,VAR_RESULT)      
        addvar(TempVar_StarterRegion,1)
        closemessage
        msgbox(("I'm sure you'll choose well!\lCome speak to me again if you want to\nsee other options."))
        waitmessage
        release
    } 
    else{
        msgbox(format("Take care of your Pokemon, and good luck on your journey!"))
    }
    release
	end
}


script LittlerootTown_ProfessorBirchsLab_EventScript_ChooseGrassStarter{
    lockall
	switch(var(VAR_FACING)){
		case DIR_EAST:
		case DIR_WEST:
		case DIR_SOUTH:
			releaseall
			end
		case DIR_NORTH:	
		default:
	}
    setvar(VAR_TEMP_7, NO)
    switch(var(TempVar_StarterRegion)){
        case 0:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
                waitmessage
                releaseall
                return
        case 1:
            showmonpic(SPECIES_BULBASAUR,10,3)
            msgbox(format("Do you want to choose Bulbasaur?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_BULBASAUR,5)
                msgbox("Received Bulbasaur!")}
        case 2:
            showmonpic(SPECIES_CHIKORITA,10,3)
            msgbox(format("Do you want to choose Chikorita?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CHIKORITA,5)
                msgbox("Received Chikorita!")}
        case 3:
            showmonpic(SPECIES_TREECKO,10,3)
            msgbox(format("Do you want to choose Treecko?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_TREECKO,5)
                msgbox("Received Treecko!")}
        case 4:
            showmonpic(SPECIES_TURTWIG,10,3)
            msgbox(format("Do you want to choose Turtwig?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_TURTWIG,5)     
                msgbox("Received Turtwig!")}
        case 5:
            showmonpic(SPECIES_SNIVY,10,3)
            msgbox(format("Do you want to choose Snivy?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_SNIVY,5)      
                msgbox("Received Snivy!")}
        case 6:
            showmonpic(SPECIES_CHESPIN,10,3)
            msgbox(format("Do you want to choose Chespin?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CHESPIN,5)                       
                msgbox("Received Chespin!")}
        case 7:
            showmonpic(SPECIES_ROWLET,10,3)
            msgbox(format("Do you want to choose Rowlet?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_ROWLET,5)       
                msgbox("Received Rowlet!")}
        case 8:
            showmonpic(SPECIES_GROOKEY,10,3)
            msgbox(format("Do you want to choose Grookey?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_GROOKEY,5)      
                msgbox("Received Grookey!")}
        case 9:
            showmonpic(SPECIES_SPRIGATITO,10,3)
            msgbox(format("Do you want to choose Sprigatito?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_SPRIGATITO,5)    
                msgbox("Received Sprigatito!")}
        case 10:
            showmonpic(SPECIES_ROWLET_HISUI,10,3)
            msgbox(format("Do you want to choose Rowlet?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_ROWLET_HISUI,5)   
                msgbox("Received Rowlet!")}                   
        default:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
            waitmessage
            releaseall
            return
    }
        if(var(VAR_TEMP_7) == YES){
            playfanfare(MUS_OBTAIN_ITEM)
            hidemonpic
            removeobject(LOCALID_BIRCHS_LAB_GRASS_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_FIRE_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_WATER_STARTER_BALL)
            setflag(FLAG_REMOVE_LAB_STARTERS)
            call(NicknamePartyMon)
            setvar(VAR_STARTER_MON, 0)
			closemessage
			delay(20)
			applymovement(LOCALID_BIRCHS_LAB_BIRCH,BirchApproachGivePokedex_GrassStarter)
			waitmovement(0)
			turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
            call(ProfessorBirchsLab_EventScript_RevisedIntroSequence)
        }
        else{
            hidemonpic
        }
    waitmessage
    releaseall
    end
}


script LittlerootTown_ProfessorBirchsLab_EventScript_ChooseFireStarter{
    lockall
	switch(var(VAR_FACING)){
		case DIR_EAST:
		case DIR_WEST:
		case DIR_SOUTH:
			releaseall
			end
		case DIR_NORTH:	
		default:
	}
    setvar(VAR_TEMP_7, NO)
    switch(var(TempVar_StarterRegion)){
        case 0:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
                waitmessage
                releaseall
                return
        case 1:
            showmonpic(SPECIES_CHARMANDER,10,3)
            msgbox(format("Do you want to choose Charmander?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CHARMANDER,5)
                msgbox("Received Charmander!")}
        case 2:
            showmonpic(SPECIES_CYNDAQUIL,10,3)
            msgbox(format("Do you want to choose Cyndaquil?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CYNDAQUIL,5)
                msgbox("Received Cyndaquil!")}
        case 3:
            showmonpic(SPECIES_TORCHIC,10,3)
            msgbox(format("Do you want to choose Torchic?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_TORCHIC,5)
                msgbox("Received Torchic!")}
        case 4:
            showmonpic(SPECIES_CHIMCHAR,10,3)
            msgbox(format("Do you want to choose Chimchar?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CHIMCHAR,5)     
                msgbox("Received Chimchar!")}
        case 5:
            showmonpic(SPECIES_TEPIG,10,3)
            msgbox(format("Do you want to choose Tepig?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_TEPIG,5)      
                msgbox("Received Tepig!")}
        case 6:
            showmonpic(SPECIES_FENNEKIN,10,3)
            msgbox(format("Do you want to choose Fennekin?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_FENNEKIN,5)                       
                msgbox("Received Fennekin!")}
        case 7:
            showmonpic(SPECIES_LITTEN,10,3)
            msgbox(format("Do you want to choose Litten?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_LITTEN,5)       
                msgbox("Received Litten!")}
        case 8:
            showmonpic(SPECIES_SCORBUNNY,10,3)
            msgbox(format("Do you want to choose Scorbunny?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_SCORBUNNY,5)      
                msgbox("Received Scorbunny!")}
        case 9:
            showmonpic(SPECIES_FUECOCO,10,3)
            msgbox(format("Do you want to choose Fuecoco?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_FUECOCO,5)    
                msgbox("Received Fuecoco!")}
        case 10:
            showmonpic(SPECIES_CYNDAQUIL_HISUI,10,3)
            msgbox(format("Do you want to choose Cyndaquil?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_CYNDAQUIL_HISUI,5)
                msgbox("Received Cyndaquil!")}                 
        default:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
            waitmessage
            releaseall
            return
    }
        if(var(VAR_TEMP_7) == YES){
            playfanfare(MUS_OBTAIN_ITEM)
            hidemonpic
            removeobject(LOCALID_BIRCHS_LAB_GRASS_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_FIRE_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_WATER_STARTER_BALL)
            setflag(FLAG_REMOVE_LAB_STARTERS)
            call(NicknamePartyMon)
            setvar(VAR_STARTER_MON, 1)
			closemessage
			delay(20)
			applymovement(LOCALID_BIRCHS_LAB_BIRCH,BirchApproachGivePokedex_FireStarter)
			waitmovement(0)
			turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
            call(ProfessorBirchsLab_EventScript_RevisedIntroSequence)
        }
        else{
            hidemonpic
        }
    waitmessage
    releaseall
    end
}

script LittlerootTown_ProfessorBirchsLab_EventScript_ChooseWaterStarter{
    lockall
	switch(var(VAR_FACING)){
		case DIR_EAST:
		case DIR_WEST:
		case DIR_SOUTH:
			releaseall
			end
		case DIR_NORTH:	
		default:
	}
    setvar(VAR_TEMP_7, NO)
    switch(var(TempVar_StarterRegion)){
        case 0:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
                waitmessage
                releaseall
                return
        case 1:
            showmonpic(SPECIES_SQUIRTLE,10,3)
            msgbox(format("Do you want to choose Squirtle?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_SQUIRTLE,5)
                msgbox("Received Squirtle!")}
        case 2:
            showmonpic(SPECIES_TOTODILE,10,3)
            msgbox(format("Do you want to choose Totodile?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_TOTODILE,5)
                msgbox("Received Totodile!")}
        case 3:
            showmonpic(SPECIES_MUDKIP,10,3)
            msgbox(format("Do you want to choose Mudkip?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_MUDKIP,5)
                msgbox("Received Mudkip!")}
        case 4:
            showmonpic(SPECIES_PIPLUP,10,3)
            msgbox(format("Do you want to choose Piplup?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_PIPLUP,5)     
                msgbox("Received Piplup!")}
        case 5:
            showmonpic(SPECIES_OSHAWOTT,10,3)
            msgbox(format("Do you want to choose Oshawott?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_OSHAWOTT,5)      
                msgbox("Received Oshawott!")}
        case 6:
            showmonpic(SPECIES_FROAKIE,10,3)
            msgbox(format("Do you want to choose Froakie?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_FROAKIE,5)                       
                msgbox("Received Froakie!")}
        case 7:
            showmonpic(SPECIES_POPPLIO,10,3)
            msgbox(format("Do you want to choose Popplio?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_POPPLIO,5)       
                msgbox("Received Popplio!")}
        case 8:
            showmonpic(SPECIES_SOBBLE,10,3)
            msgbox(format("Do you want to choose Sobble?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_SOBBLE,5)      
                msgbox("Received Sobble!")}
        case 9:
            showmonpic(SPECIES_QUAXLY,10,3)
            msgbox(format("Do you want to choose Quaxly?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_QUAXLY,5)    
                msgbox("Received Quaxly!")}
        case 10:
            showmonpic(SPECIES_OSHAWOTT_HISUI,10,3)
            msgbox(format("Do you want to choose Oshawott?"),MSGBOX_YESNO)
            copyvar(VAR_TEMP_7,VAR_RESULT)
            if(var(VAR_TEMP_7) == YES){
                givemon(SPECIES_OSHAWOTT_HISUI,5)      
                msgbox("Received Oshawott!")}                
        default:
            msgbox(format("Better go speak with Prof. Birch before taking a Pokemon."))
            waitmessage
            releaseall
            return
    }
        if(var(VAR_TEMP_7) == YES){
            playfanfare(MUS_OBTAIN_ITEM)
            hidemonpic
            removeobject(LOCALID_BIRCHS_LAB_GRASS_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_FIRE_STARTER_BALL)
            removeobject(LOCALID_BIRCHS_LAB_WATER_STARTER_BALL)
            setflag(FLAG_REMOVE_LAB_STARTERS)
            call(NicknamePartyMon)
            setvar(VAR_STARTER_MON, 2)
			closemessage
			delay(20)
			applymovement(LOCALID_BIRCHS_LAB_BIRCH,BirchApproachGivePokedex_WaterStarter)
			waitmovement(0)
			turnobject(OBJ_EVENT_ID_PLAYER, DIR_EAST)
            call(ProfessorBirchsLab_EventScript_RevisedIntroSequence)
        }
        else{
            hidemonpic
        }
    waitmessage
    releaseall
    end
}

script ProfessorBirchsLab_EventScript_RevisedIntroSequence{
    setflag (FLAG_HIDE_ROUTE_101_BIRCH_ZIGZAGOON_BATTLE)
	setflag (FLAG_SYS_POKEMON_GET)
    setflag (FLAG_ADVENTURE_STARTED)
	setflag (FLAG_RESCUED_BIRCH)
    setflag (FLAG_HIDE_ROUTE_101_BIRCH_STARTERS_BAG)
    setflag (FLAG_HIDE_OLDALE_TOWN_RIVAL)
	setflag (FLAG_NO_BAG_ITEMS_IN_BATTLE)
	setflag (FLAG_HIDDEN_BY_DEFAULT)
	setvar(VAR_ROUTE101_STATE, 3)
	clearflag (FLAG_HIDE_MAP_NAME_POPUP)
    setvar (VAR_OLDALE_TOWN_STATE, 1)
	setvar (VAR_LITTLEROOT_RIVAL_STATE, 4)
	msgbox ("Prof. Birch: With that choice, {PLAYER},\nyou have begun your Pokémon journey!\pPlease take this Pokédex too, to record\nall of the Pokémon you encounter.")
    playfanfare(MUS_OBTAIN_ITEM)
    msgbox ("Received Pokédex!")
	waitfanfare
	closemessage
	setflag (FLAG_SYS_POKEDEX_GET)
	special (SetUnlockedPokedexFlags)
	setflag (FLAG_RECEIVED_POKEDEX_FROM_BIRCH)
	//setvar (VAR_CABLE_CLUB_TUTORIAL_STATE, 1)
    setflag (FLAG_SYS_NATIONAL_DEX)
	special (EnableNationalPokedex)
	msgbox (format("Prof. Birch: You will also need Pokéballs, in order to catch new Pokémon to add to your team. This should help you get started, but you can buy more at the Mart in Oldale Town."))
	giveitem(ITEM_PREMIER_BALL, 1)
	closemessage
	msgbox (format("Prof. Birch: And here are some utility items that will make your life as a Trainer much easier."))
	giveitem(ITEM_POKEMON_BOX_LINK)
	//giveitem(ITEM_CANDY_BAG) //now replaced by the two items below
	giveitem(ITEM_EXP_CANDY_S)
	giveitem(ITEM_EXP_CANDY_XL)
	giveitem(ITEM_ESCAPE_ROPE)
	giveitem(ITEM_FULL_RESTORE)
	giveitem(ITEM_UNLIMITED_REPEL)
	giveitem(ITEM_ITEMFINDER)
	closemessage
	setvar(VAR_LEVEL_CAP,10)
    setvar(VAR_BIRCH_LAB_STATE, 5)
	setvar (VAR_LITTLEROOT_TOWN_STATE, 3)
	setvar(VAR_OLDALE_RIVAL_STATE,0)
	setvar(VAR_PETALBURG_GYM_STATE,0)
	clearflag (FLAG_HIDE_PETALBURG_GYM_WALLY)
	msgbox (format("Prof. Birch: Double battles are the standard format in Hoenn now, so you should hurry and catch another Pokémon. {RIVAL} is waiting in Oldale Town to see you off."))
    //call(LittlerootTown_ProfessorBirchsLab_EventScript_RemoveRivalIntroFlag)
	//setflag(FLAG_HIDE_LITTLEROOT_TOWN_BIRCHS_LAB_BIRCH) //this is a second (original) Birch sprite in the lab, I do not use
    return
}

script NicknamePartyMon{
    msgbox("Give it a nickname?",MSGBOX_YESNO)
    if(var(VAR_RESULT) == YES){
        call(Common_EventScript_GetGiftMonPartySlot)
        call(Common_EventScript_NameReceivedPartyMon)
    }
    return
}

script NicknameBoxMon{
    msgbox("Give it a nickname?", MSGBOX_YESNO)
    if(var(VAR_RESULT) == YES){
        call(Common_EventScript_NameReceivedBoxMon)
    }
    call(Common_EventScript_TransferredToPC)
}

movement BirchApproachGivePokedex_GrassStarter{
	walk_left * 2
}

movement BirchApproachGivePokedex_FireStarter{
	walk_left
}

movement BirchApproachGivePokedex_WaterStarter{
	face_left
}

script LittlerootTown_ProfessorBirchsLab_EventScript_Aide{
	lock
	if (flag(FLAG_ADVENTURE_STARTED)) {
		goto(LittlerootTown_ProfessorBirchsLab_EventScript_Aide_SetHandicap)
	}
	else {
		goto(LittlerootTown_ProfessorBirchsLab_EventScript_Aide_Intro)
	}
}

script LittlerootTown_ProfessorBirchsLab_EventScript_Aide_Intro{
	lock
	faceplayer
	msgbox(format("Hello, {PLAYER}! Professor Birch is very excited about your Pokémon journey."))
	release
	end
}

script LittlerootTown_ProfessorBirchsLab_EventScript_Aide_SetHandicap {
	lock
	faceplayer
	msgbox(LittlerootTown_ProfessorBirchsLab_Text_ExplainHandicap)
	waitmessage
	buffernumberstring(STR_VAR_1,VAR_LEVEL_HANDICAP)
	if(var(VAR_LEVEL_HANDICAP) == 0){
		msgbox(format("You currently do not have a handicap.\pWould you like to set one?"),MSGBOX_YESNO)
	}
	else{
		msgbox(format("You currently have a handicap of {STR_VAR_1}.\pWould you like to change it?"),MSGBOX_YESNO)
	}
	waitmessage
	if (var(VAR_RESULT) == YES) {
		closemessage
		goto(LittlerootTown_ProfessorBirchsLab_EventScript_Aide_SetHandicapYes)
	}
	else {
		msgbox(format("If you ever change your mind, come back and talk to me."))
	}
	waitmessage
	releaseall
	end
}

text LittlerootTown_ProfessorBirchsLab_Text_ExplainHandicap {
	format("I can help you register a handicap for your adventure.\pA handicap will let you use slightly higher level Pokémon than you otherwise could, in all battles.\pRemember, though, that once a handicap is set it can’t be lowered, and it will be recorded by the Pokémon League challenge.")
}

script LittlerootTown_ProfessorBirchsLab_EventScript_Aide_SetHandicapYes {
	if(var(VAR_LEVEL_HANDICAP) == 10){
		msgbox(format("You currently have a handicap of 10.\pWe cannot change it any further."))
		waitmessage
		releaseall
		end
	}
	elif(var(VAR_LEVEL_HANDICAP) == 0){
		msgbox(format("What level handicap would you like?"))
        dynmultichoice(25,2,0,5,0,DYN_MULTICHOICE_CB_NONE,"0","1","2","3","4","5","6","7","8","9","10")
        copyvar(TempVar_HandicapAnswer,VAR_RESULT)      
		waitmessage

		if(var(TempVar_HandicapAnswer) == 0){
			msgbox(format("Very well, you still do not have a handicap.\pCome back if you ever decide to add one."))
			waitmessage
			releaseall
			end
		}
		elif(var(TempVar_HandicapAnswer) == 127){
			setvar(TempVar_HandicapAnswer,0)
			msgbox(format("Very well, you still do not have a handicap.\pCome back if you ever decide to add one."))
			waitmessage
			releaseall
			end
		}
		else{
			buffernumberstring(STR_VAR_2,TempVar_HandicapAnswer)
			msgbox(format("Are you sure you would like a handicap of {STR_VAR_2} levels?"),MSGBOX_YESNO)

			if(var(VAR_RESULT) == YES){
				copyvar(VAR_LEVEL_HANDICAP,TempVar_HandicapAnswer)
				msgbox(format("Your handicap has been set to {STR_VAR_2} levels."))
				waitmessage
				call(LittlerootTown_ProfessorBirchsLab_EventScript_ApplyNewHandicap)
				releaseall
				end
			}
			else{
				msgbox(format("Very well, you still do not have a handicap.\pCome back if you ever decide to add one."))
				waitmessage
				releaseall
				end
			}
		}
	}
	else {
		buffernumberstring(STR_VAR_1,VAR_LEVEL_HANDICAP)
		copyvar(TempVar_ProspectiveHandicap,VAR_LEVEL_HANDICAP)
		dynmultipush("0",0)
		if(var(VAR_LEVEL_HANDICAP) <= 9){dynmultipush("1",1)}
		if(var(VAR_LEVEL_HANDICAP) <= 8){dynmultipush("2",2)}
		if(var(VAR_LEVEL_HANDICAP) <= 7){dynmultipush("3",3)}
		if(var(VAR_LEVEL_HANDICAP) <= 6){dynmultipush("4",4)}
		if(var(VAR_LEVEL_HANDICAP) <= 5){dynmultipush("5",5)}
		if(var(VAR_LEVEL_HANDICAP) <= 4){dynmultipush("6",6)}
		if(var(VAR_LEVEL_HANDICAP) <= 3){dynmultipush("7",7)}
		if(var(VAR_LEVEL_HANDICAP) <= 2){dynmultipush("8",8)}
		if(var(VAR_LEVEL_HANDICAP) <= 1){dynmultipush("9",9)}
//		if(var(VAR_LEVEL_HANDICAP) == 0){dynmultipush("10",10)}
		msgbox(format("How much would you like to increase it?"))
		dynmultistack(25,2,FALSE,5,1,0,DYN_MULTICHOICE_CB_NONE)
		copyvar(TempVar_HandicapAnswer,VAR_RESULT)    
		waitmessage  

		switch(var(TempVar_HandicapAnswer)){
			case 0:
				msgbox(format("Your handicap remains at {STR_VAR_1}.\pCome back if you ever decide to increase it."))  
				waitmessage
				closemessage
				releaseall
				end
			case 1:
				addvar(TempVar_ProspectiveHandicap,1)
			case 2:
				addvar(TempVar_ProspectiveHandicap,2)
			case 3:
				addvar(TempVar_ProspectiveHandicap,3)
			case 4:
				addvar(TempVar_ProspectiveHandicap,4)
			case 5:
				addvar(TempVar_ProspectiveHandicap,5)
			case 6:
				addvar(TempVar_ProspectiveHandicap,6)
			case 7:
				addvar(TempVar_ProspectiveHandicap,7)
			case 8:
				addvar(TempVar_ProspectiveHandicap,8)
			case 9:
				addvar(TempVar_ProspectiveHandicap,9)
			case 10:
				addvar(TempVar_ProspectiveHandicap,10)
			default:
				msgbox(format("Your handicap remains at {STR_VAR_1}.\pCome back if you ever decide to increase it."))  
				waitmessage
				releaseall
				end
		}
		buffernumberstring(STR_VAR_2,TempVar_ProspectiveHandicap)
		msgbox(format("Are you sure you would like to increase your handicap from {STR_VAR_1} to {STR_VAR_2}?"),MSGBOX_YESNO)
		waitmessage
		if(var(VAR_RESULT) == YES){
			copyvar(VAR_LEVEL_HANDICAP,TempVar_ProspectiveHandicap)
			call(LittlerootTown_ProfessorBirchsLab_EventScript_ApplyNewHandicap)
			msgbox(format("Very well. Your handicap has been set to {STR_VAR_2}.\pCome back if you ever decide to increase it."))
		}
		else{
			msgbox(format("Very well. Your handicap remains at {STR_VAR_1}.\pCome back if you ever decide to increase it."))  
		}
		waitmessage
		releaseall
		end
	}
}

script LittlerootTown_ProfessorBirchsLab_EventScript_ApplyNewHandicap{
				switch(var(TempVar_HandicapAnswer)){
					case 1:
						addvar(VAR_LEVEL_CAP,1)
					case 2:
						addvar(VAR_LEVEL_CAP,2)
					case 3:	
						addvar(VAR_LEVEL_CAP,3)
					case 4:
						addvar(VAR_LEVEL_CAP,4)
					case 5:
						addvar(VAR_LEVEL_CAP,5)
					case 6:
						addvar(VAR_LEVEL_CAP,6)
					case 7:
						addvar(VAR_LEVEL_CAP,7)
					case 8:
						addvar(VAR_LEVEL_CAP,8)
					case 9:
						addvar(VAR_LEVEL_CAP,9)
					case 10:	
						addvar(VAR_LEVEL_CAP,10)
					default:
						delay(1)
				}
				setvar(TempVar_HandicapAnswer,0)
				return
}